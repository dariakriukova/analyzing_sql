queries:
  - name: voltage
    query: ":DATA? 'V4'"
  - name: anode_current_1
    query: ":DATA? 'I1'"
  - name: anode_current_2
    query: ":DATA? 'I2'"
  - name: anode_current_3
    query: ":DATA? 'I3'"
  - name: cathode_current
    query: ":DATA? 'I4'"
chips:
  - voltage: voltage
    anode_current: anode_current_1
    cathode_current: cathode_current
  - voltage: voltage
    anode_current: anode_current_2
    cathode_current: cathode_current
  - voltage: voltage
    anode_current: anode_current_3
    cathode_current: cathode_current

measurements:
  - name: 0.01v
    instrument:
      # sets the voltage output MODE
      - :PAGE:CHAN:SMU1:MODE: V
      - :PAGE:CHAN:SMU2:MODE: V
      - :PAGE:CHAN:SMU3:MODE: V
      - :PAGE:CHAN:SMU4:MODE: V

      - :PAGE:CHAN:SMU1:FUNC: CONS
      - :PAGE:CHAN:SMU2:FUNC: CONS
      - :PAGE:CHAN:SMU3:FUNC: CONS
      - :PAGE:CHAN:SMU4:FUNC: VAR1
      - :PAGE:CHAN:MODE: SWEEP  # sets the sweep measurement mode

      - :PAGE:MEAS:VAR1:MODE: SINGLE  # sets the SWEEP MODE of VAR1 for sweep measurement.(Single)
      - :PAGE:MEAS:VAR1:SPAC: LIN  # selects the sweep type of VAR1 as linear staircase
      - :PAGE:MEAS:VAR1:START: 0.01  # sets the sweep START value of VAR1.
      - :PAGE:MEAS:VAR1:STEP: 0.001  # sets the sweep STEP value of VAR1 for the linear sweep.
      - :PAGE:MEAS:VAR1:STOP: -0.01  # sets the sweep STOP value of VAR1.
      - :PAGE:MEAS:VAR1:COMP: 0.1  # sets the COMPLIANCE value of VAR1.
      - :PAGE:MEAS:VAR1:PCOM:STATE: OFF  # sets the power compliance of VAR1 to disable
      #      - :PAGE:MEAS:HTIM: 0  # sets the HOLD TIME of sweep measurement
      #      - :PAGE:MEAS:DEL: 0  # sets the DELAY TIME of SMU.

      # Integration time
      - :PAGE:MEAS:MSET:ITIM: &int_time_v001 SHORT

      - :PAGE:MEAS:CONS:SMU1: 0  # sets the constant SOURCE value of SMU1 for sweep measurements
      - :PAGE:MEAS:CONS:SMU2: 0  # sets the constant SOURCE value of SMU2 for sweep measurements
      - :PAGE:MEAS:CONS:SMU3: 0  # sets the constant SOURCE value of SMU2 for sweep measurements
      - :PAGE:MEAS:CONS:SMU4: 0  # sets the constant SOURCE value of SMU2 for sweep measurements
      - :PAGE:MEAS:CONS:SMU2:COMP: 0.1

      - :PAGE:DISP:LIST: "'V4','I1', 'I2', 'I3', 'I4'"  # selects the variable names for LIST display
      - :PAGE:GLIS:SCAL:AUTO: ONCE
    program:
      minimum: true
      measurements_kwargs:
        int_time: *int_time_v001

  - name: 20v
    instrument:
      - :PAGE:MEAS:VAR1:MODE: SINGLE  # sets the SWEEP MODE of VAR1 for sweep measurement.(Single)
      - :PAGE:MEAS:VAR1:SPAC: LIN  # selects the sweep type of VAR1 as linear staircase
      - :PAGE:MEAS:VAR1:START: 20  # sets the sweep START value of VAR1.
      - :PAGE:MEAS:VAR1:STEP: -0.5  # sets the sweep STEP value of VAR1 for the linear sweep.
      - :PAGE:MEAS:VAR1:STOP: -2  # sets the sweep STOP value of VAR1.
      - :PAGE:MEAS:VAR1:COMP: 0.1  # sets the COMPLIANCE value of VAR1.
      - :PAGE:MEAS:VAR1:PCOM:STATE: OFF  # sets the power compliance of VAR1 to disable
      - :PAGE:MEAS:HTIM: 3  # sets the HOLD TIME of sweep measurement
      - :PAGE:MEAS:DEL: 0  # sets the DELAY TIME of SMU.

      # Integration time
      - :PAGE:MEAS:MSET:ITIM: &int_time_v20 MED

      # sets the voltage output MODE
      - :PAGE:CHAN:SMU1:MODE: V
      - :PAGE:CHAN:SMU2:MODE: V
      - :PAGE:CHAN:SMU3:MODE: V
      - :PAGE:CHAN:SMU4:MODE: V

      - :PAGE:CHAN:SMU1:FUNC: CONS  # sets the function (FCTN) of SMU1. SMU1 - Emitter
      - :PAGE:CHAN:SMU2:FUNC: CONS  # sets the function (FCTN) of SMU2 as a constant
      - :PAGE:CHAN:SMU3:FUNC: CONS  # sets the function (FCTN) of SMU3. SMU3 - Base
      - :PAGE:CHAN:SMU4:FUNC: VAR1  # ????
      - :PAGE:CHAN:MODE: SWEEP  # sets the sweep measurement mode


      - :PAGE:MEAS:CONS:SMU1: 0  # sets the constant SOURCE value of SMU1 for sweep measurements
      - :PAGE:MEAS:CONS:SMU2: 0  # sets the constant SOURCE value of SMU2 for sweep measurements
      - :PAGE:MEAS:CONS:SMU3: 0  # sets the constant SOURCE value of SMU2 for sweep measurements
      - :PAGE:MEAS:CONS:SMU4: 0  # sets the constant SOURCE value of SMU2 for sweep measurements
      - :PAGE:MEAS:CONS:SMU2:COMP: 0.1

      - :PAGE:DISP:LIST: "'V4','I1', 'I2', 'I3', 'I4'"  # selects the variable names for LIST display
    program:
      measurements_kwargs:
        int_time: *int_time_v20

